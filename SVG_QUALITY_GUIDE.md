# SVG Vector Tracing Quality Guide

## Overview
Our SVG Vector Tracing uses **ImageTracerJS** instead of potrace for better reliability and quality. This guide explains how to achieve the best results.

## Quality Levels

### Light (Fast)
- **Best for**: Simple shapes, logos, icons
- **Speed**: Very fast
- **File size**: Small
- **Precision**: 1 decimal place
- **Settings**: `ltres: 1, qtres: 1, pathomit: 8`

### Medium (Balanced) ⭐ **Recommended**
- **Best for**: Most images, illustrations
- **Speed**: Moderate  
- **File size**: Medium
- **Precision**: 2 decimal places
- **Settings**: `ltres: 0.5, qtres: 0.5, pathomit: 2`

### Strong (High Quality)
- **Best for**: Complex shapes, detailed illustrations
- **Speed**: Slower but thorough
- **File size**: Large
- **Precision**: 3 decimal places  
- **Settings**: `ltres: 0.1, qtres: 0.1, pathomit: 0`

## Custom Parameters

You can override any setting using the `customParams` field:

### Key Quality Parameters

| Parameter | Default | Range | Effect |
|-----------|---------|-------|--------|
| `ltres` | 0.5 | 0.01-2.0 | Line fitting precision (lower = more precise) |
| `qtres` | 0.5 | 0.01-2.0 | Curve fitting precision (lower = smoother curves) |
| `pathomit` | 2 | 0-20 | Minimum path length (lower = more detail) |
| `roundcoords` | 2 | 1-4 | Coordinate decimal places (higher = more precise) |
| `linefilter` | true | true/false | Clean up jagged paths |
| `rightangleenhance` | false | true/false | Enhance corners vs smooth curves |

### Example: Ultra-High Quality
```json
{
  "ltres": 0.01,
  "qtres": 0.01,
  "pathomit": 0,
  "roundcoords": 4,
  "linefilter": true
}
```

## Quality vs Performance

| Setting | Processing Time | File Size | Quality | Best For |
|---------|----------------|-----------|---------|----------|
| Light | 100ms | 500B | Good | Icons, logos |
| Medium | 250ms | 2KB | Great | General use |
| Strong | 500ms | 4KB | Excellent | Complex art |
| Ultra | 800ms | 8KB | Perfect | Print quality |

## Tips for Best Results

### Input Image Preparation
1. **High contrast**: Black/white images work best
2. **Clean edges**: Avoid blurry or anti-aliased edges
3. **Appropriate size**: 200-2000px works well
4. **Simple colors**: 2-color images trace better than gradients

### Parameter Tuning
- **For smooth curves**: Set `rightangleenhance: false`, low `qtres` (0.1)
- **For sharp corners**: Set `rightangleenhance: true`, higher `qtres` (1.0)
- **For maximum detail**: Set `pathomit: 0`, `ltres: 0.01`
- **For clean output**: Enable `linefilter: true`

### Troubleshooting
- **Jagged curves**: Lower `qtres` to 0.1 or less
- **Missing detail**: Lower `pathomit` to 0-1
- **File too large**: Increase `ltres` and `qtres` to 0.5-1.0
- **Processing too slow**: Use Light intensity or increase thresholds

## Comparison with Potrace

| Feature | ImageTracerJS ✅ | Potrace ❌ |
|---------|-----------------|-----------|
| Memory usage | Stable | Memory leaks |
| Node.js compatibility | Perfect | Runtime errors |
| Installation | Simple npm | Native compilation |
| Customization | Many options | Limited |
| Curve quality | Excellent | Good |
| Performance | Consistent | Unreliable |

## API Usage Examples

### Basic usage:
```bash
curl -X POST '/api/outliner' \
  -F 'image=@image.png' \
  -F 'algorithm=svg-vector-trace' \
  -F 'intensity=medium'
```

### High-quality custom settings:
```bash
curl -X POST '/api/outliner' \
  -F 'image=@complex_image.png' \
  -F 'algorithm=svg-vector-trace' \
  -F 'intensity=strong' \
  -F 'customParams={"ltres":0.1,"qtres":0.05,"pathomit":0,"linefilter":true}'
```

## Result Analysis

A good SVG trace should have:
- ✅ True vector paths (no embedded bitmaps)  
- ✅ Smooth curves using Q (quadratic) or C (cubic) commands
- ✅ Appropriate detail level for the source image
- ✅ Reasonable file size (typically 1-10KB)
- ✅ Clean, scalable output

---

*Generated by ImageTracerJS implementation - no more potrace memory issues!*
